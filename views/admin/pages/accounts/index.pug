extends ../../layouts/default.pug
include ../../mixins/successAlert.pug

block main
 if(role.permissions.includes("accounts_view")) 
  h1 Accounts List
  +errorAlert()
  +successAlert()

  div(class="card mb-3")
    div(class="card-header") List
    div(class="card-body")
      div(class="row")
        div(class="col-8")
        div(class="col-4 text-right")
            if(role.permissions.includes("accounts_create"))
                a(class="btn btn-outline-success", href="/admin/accounts/create") + Add new

  table(class="table table-hover table-sm")
    thead
      tr
        th Number
        th Avatar
        th Full Name
        th Role
        th Email
        th Status
        th Actions
    tbody
      each items, index in accounts
        tr
          td #{index + 1}
          td
            img(src=items.avatar, width="100px", height="100px")
          td #{items.fullName}
          td #{items.role}
          td #{items.email}
          td
            if items.status == "active"
              a(
                href="javascript:;",
                class="badge badge-success",
                data-status="active"
              ) Active
            else
              a(
                href="javascript:;",
                class="badge badge-danger",
                data-status="inactive"
              ) Inactive
          td
            a(class="btn btn-secondary btn-sm", href=`/admin/accounts/details/${items.id}`) Details
            if(role.permissions.includes("accounts_edit"))
                a(class="btn btn-warning btn-sm", href=`/admin/accounts/edit/${items.id}`) Edit
            if(role.permissions.includes("accounts_delete"))
                button(
                class="btn btn-danger btn-sm ml-1",
                button-delete,
                data-id=items.id
                ) Delete
